# 【思源淘】—— 北京交大学子专属，闲置好物轻松淘，共享智慧与美好！

---

## 1. 项目愿景：激活校园闲置潜力，构建诚信高效的绿色共享社区

在北京交通大学，每一件物品都承载着独特的故事和价值。从承载知识的教材、见证奋斗的电子设备，到丰富生活的运动器材和艺术藏品，它们往往在完成一个使命后，依然蕴含着巨大的再利用潜力。

【思源淘】的创立，正是根植于北京交大"饮水思源"的校训，以及对可持续发展理念的坚定践行。我们致力于搭建一个专为北京交大学子服务的、以"线上发布沟通，线下安全交易"为核心的、高效、便捷、高信任度的二手物品共享平台。 在这里，我们鼓励每一位同学将闲置的宝藏分享出去，让它们重新焕发生命力，在校园内高效流转，共同构建一个充满活力、互助友爱的绿色共享社区。

## 2. 项目使命：让每一次"淘"与"传"，都源于信任，结缘于价值

我们的使命是：

*   **传承思源精神**： 鼓励学子们将闲置物品传递给需要的同学，让知识和资源在校园内不断传承，体现"饮水思源"的交大精神。
*   **建立学生专属信任机制**： 凭借严格的校园邮箱认证（`User.IsVerified`），确保平台用户均为本校师生，为线上沟通和线下交易提供坚实的信任基础。
*   **简化淘物体验**： 提供直观友好的商品发布、搜索、浏览和**即时消息沟通（`ChatMessage`）**功能，让闲置物品的买卖过程轻松愉快。
*   **倡导绿色校园生活**： 通过循环利用闲置物品，减少资源浪费，共同为北京交大的环保事业贡献力量。
*   **提供平台保障与服务**： 平台管理员（`User.IsStaff`）将深度参与到商品审核、订单仲裁和问题解决中，确保交易公平、透明，并在必要时提供系统通知（`SystemNotification`）及处理举报（`Report`），为师生提供坚实的后盾。

## 3. 核心功能亮点：驱动未来，赋能共享的五大引擎

基于我们稳健的SQL Server数据库架构，【思源淘】将为您提供以下核心功能，确保平台高效运转和卓越的用户体验：

### 【校园专属认证】安全的用户账户管理 (`User` 表):

*   **校内身份验证**： 新用户注册后，需通过校园邮箱认证才能解锁发布商品、创建订单、发送消息等核心功能，确保所有用户都是北京交大学子（`User.IsVerified`字段）。
*   **个性化主页**： 用户可管理个人资料，包括用户名（`User.UserName`）、头像（`User.AvatarUrl`）、简介（`User.Bio`）和联系电话（`User.PhoneNumber`）。
*   **信用体系**： 平台根据用户的交易行为（如完成订单、获得好评）自动调整信用分（`User.Credit`），构建健康的交易环境。管理员（`User.IsStaff`）拥有调整用户状态（`User.Status`）的权限。

### 【轻松淘遍校园】海量商品浏览与管理 (`Product`, `ProductImage`, `UserFavorite` 表):

*   **便捷发布**： 卖家可轻松发布闲置物品，填写商品名称（`Product.ProductName`）、描述（`Product.Description`）、价格（`Product.Price`）和数量（`Product.Quantity`），并上传多张商品图片（`ProductImage`），支持设置主图（`ProductImage.SortOrder=0`）。
*   **智能搜索与分类**： 买家可通过商品名称、类别（`Product.CategoryName`）、价格区间、商品状态（`Product.Status`）进行精准搜索和筛选，快速找到心仪的商品。
*   **收藏与关注**： 用户可将感兴趣的商品收藏（`UserFavorite`）至个人列表，便于随时查看，并可接收到降价通知（`SystemNotification`）。
*   **商品生命周期管理**： 商品状态从"待审核"（`PendingReview`）到"在售"（`Active`）、"已售罄"（`Sold`）或"已下架"（`Withdrawn`），全程透明可见。

### 【线上约定，线下相遇】安全可靠的交易流程 (`Order`, `ChatMessage` 表):

*   **在线沟通**： 买卖双方可通过平台内置的**消息系统（`ChatMessage`）**进行即时沟通，询问商品详情、议价，协商交易地点和时间，所有聊天记录都与具体商品关联（`ChatMessage.ProductID`）。
*   **订单创建与状态流转**： 沟通达成一致后，一方可创建订单（`Order`）。订单状态从"待卖家确认"（`PendingSellerConfirmation`）到"卖家已确认"（`ConfirmedBySeller`），直至"已完成"（`Completed`），每一步都清晰可追踪。
*   **线下交割**： 订单状态明确指引买卖双方进行线下见面、验货并完成交易，保障交易安全。
*   **订单取消与退货**： 支持订单取消（`Order.Status = 'Cancelled'`）和退货请求（`ReturnRequest`），并可申请管理员介入处理，确保公平。

### 【交易评价】构建信任与口碑 (`Evaluation` 表):

*   **交易评价**： 订单完成后，买家可对卖家进行评价（`Evaluation`），包括星级评分（`Evaluation.Rating`）和文字内容（`Evaluation.Content`），为其他用户提供参考。
*   **信用积累**： 评价结果将直接影响卖家的信用分（`User.Credit`），激励用户提供优质服务。
*   **唯一评价**： 确保同一订单只能被评价一次（`Evaluation.OrderID`的唯一约束）。

### 【平台守护】管理员介入与风险控制 (`Report`, `SystemNotification`, `User` 表):

*   **举报机制**： 用户可对违规用户、虚假商品信息或不当交易行为进行举报（`Report`），维护平台秩序。
*   **管理员处理**： 平台管理员（`User.IsStaff`）负责审核商品（`Product.Status`）、处理举报（`Report.ProcessingStatus`）和介入退货请求（`ReturnRequest.AuditStatus`），确保平台健康运行。
*   **系统通知**： 管理员可发布系统通知（`SystemNotification`），向全体或特定用户发送重要公告、活动信息或交易提醒。
*   **账户管理**： 管理员可根据情况禁用或启用用户账户，维护平台安全。

## 4. 技术基石：坚实可靠的SQL Server数据库架构

我们的项目核心优势在于其坚如磐石的SQL Server数据库架构。每一张表、每一个字段、每一个约束、每一个触发器（如订单取消时恢复商品库存）和存储过程都经过精心设计与严谨考量，旨在：

*   **保障数据一致性**： 严格的事务管理和外键约束，确保每一次数据操作都精准无误。
*   **提升系统性能**： 优化的索引策略和存储过程，实现快速查询与响应，为所有【思源淘】用户提供流畅体验。
*   **强化数据安全**： 细致的权限控制和数据脱敏设计，全方位保护用户隐私和交易安全。
*   **支持业务扩展**： 模块化的设计理念，为未来功能的迭代与升级预留无限可能，迎接校园生活的新变化。

## 5. 展望未来：与交大学子共创绿色共享新生活

【思源淘】不仅仅是一个二手交易平台，它更是北京交大校园内一种全新的生活方式：互助、共享、环保、信任。我们坚信，通过我们的努力，能够：

*   **激活闲置资源**： 让每一件"旧物"找到"新生"，减少浪费，为校园节约贡献力量。
*   **增进校内互助**： 促进学子间的交流与互助，构建更紧密的社区联系。
*   **普及绿色理念**： 让循环利用成为校园新时尚，共同践行可持续发展。

我们诚挚邀请每一位对未来校园生活充满期待的北京交大学子，加入【思源淘】，体验便捷、信任的闲置物品交易之旅！让我们一起，用智慧和热情，将这片蓝图变为现实，共同打造一个让北京交大闲置物品"线上淘得妙，线下交得好"的理想平台！

## 6. 环境配置

要开始使用【思源淘】后端项目，您需要进行以下环境配置：

1.  **安装 Python**: 确保您的系统中安装了 Python 3.8 或更高版本。您可以从 [Python 官方网站](https://www.python.org/downloads/) 下载并安装。

2.  **创建并激活虚拟环境**: 强烈建议为项目创建一个独立的 Python 虚拟环境，以隔离项目依赖。

    打开终端，进入项目根目录，执行以下命令：

    ```bash
    python3 -m venv .venv
    ```

    然后激活虚拟环境：

    *   在 macOS 和 Linux 上：

        ```bash
        source .venv/bin/activate
        ```

    *   在 Windows 上：

        ```bash
        .venv\Scripts\activate
        ```

3.  **安装项目依赖**: 激活虚拟环境后，使用 pip 安装 `requirements.txt` 文件中列出的所有依赖库。

    ```bash
    pip install -r requirements.txt
    ```

4.  **配置环境变量**: 项目使用 `.env` 文件来管理敏感配置信息，如数据库连接字符串。在项目根目录创建一个名为 `.env` 的文件（如果尚不存在），并按照 `.env.example` 或项目文档中的说明填写必要的配置项。

    ```bash
    # 示例 .env 文件内容 (请根据实际情况修改)
    DATABASE_URL=mssql+pyodbc://user:password@host:port/database?driver=ODBC+Driver+17+for+SQL+Server
    # 其他可能的配置项...
    ```

完成以上步骤后，您的开发环境就已准备就绪。